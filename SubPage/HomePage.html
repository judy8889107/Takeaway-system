<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta https-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FOOD FOR YOU CHATBOT</title>
    <link rel="icon" href="../images/FFYIcon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../css/HomePage.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- 引用jquery -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script src="../js/botmanWidget.js"></script>
    <script src='https://cdn.jsdelivr.net/npm/botman-web-widget@0/build/js/widget.js'></script>
    <!-- 使用ajax串接後台php -->
    <script>

        $(document).ready(function () {
            var session;
            // 利用load加載後台php
            $.get("../phpCode/HomePage.php", function (result) {
                session = result; /* 成功登入，得到該用戶所有資料 */
                if (session.islogin) { /* 若登入成功 */
                    setForegroundElement(); /* 執行設定前台element fun */
                }
            }, "json");

            //Button事件(Login button)
            $("i.fa.fa-user").click(function (e) {
                if (!session.islogin) { /* 若還未登入則會跳轉登入頁面 */
                    $(location).prop("href", "Login.html");

                }
            })
            // 按下登出按鈕
            $("i.fa.fa-sign-out.Logout").click(function(e){
                session.islogin = false;
                $("div.user i.fa.fa-user").text("");
                $("#add-address").text("");
                $(".SignIn").show();
                hoverLogin = false;
            });

            //當login時方可下拉選單
            let hoverLogin = false
            let hoverDropdown = false
            $("i.fa.fa-user").hover(
                function (e) {
                    // 判斷使用者是否登入
                    if (session.islogin) { /* 已登入 */
                        hoverLogin = true
                        $('.user-dropdown').slideDown(500) /* 選單下拉動畫 */
                        
                    } else {   /* 未登入 */
                        hoverLogin = false
                    }
                    loginSlideUp();
                }
            );

            $('.user-dropdown').hover(
                () => {
                    hoverDropdown = true
                },
                () => {
                    hoverDropdown = false
                    loginSlideUp()
                }
            );

            //由於判定hoverLogin、hoverDropdown true false需要幾秒的時間，因此需設hover計時器
            function loginSlideUp() {
                setTimeout(() => {
                    if (!(hoverDropdown || hoverLogin)) {
                        $('.user-dropdown').slideUp(500)
                    }
                }, 100)

            };


            //當成功登入後 設定前台所有element
            function setForegroundElement() {
                $("div.user i.fa.fa-user").text(session.nickName);
                $("#add-address").text(session.address);
                $(".SignIn").hide();
            }


        });
    </script>
</head>

<body>
    <div id="backsideSession"></div>
    <div id="container" class="container">
        <div id="menu">
            <div class="logo">
                <img src="../images/Logo-01-01.png" alt="logo">
            </div>
            <div class="menu-item">
                <a href="#">Home</a>
                <a href="#">About</a>
                <a href="#">Calorie</a>
            </div>
        </div>

        <div id="food-container">
            <div id="header">
                <div class="add-box">
                    <i class="fa fa-map-marker your-address" id="add-address">Your Address</i>
                </div>
                <div class="util">
                    <i class="fa fa-search">Search</i>
                    <i class="fa fa-cart-plus" id="cart-plus"> 0 Items</i>
                </div>

            </div>

            <div id="food-items" class="food-items">

                <div id="appetizer">
                    <p id="category-name">開胃菜</p>
                    <div id="item-card">
                        <div id="card-top">
                            <i class="fa fa-star" id="rating">4.5</i>
                            <i class="fa fa-cart-plus fa-2x add-to-cart"></i>
                        </div>
                        <img src="../images/Mixed-Fruit-Shake.png" alt="">
                        <p id="item-name">綜合水果奶昔</p>
                        <p id="item-price">價格 : $ 10</p>
                    </div>

                    <div id="item-card">
                        <div id="card-top">
                            <i class="fa fa-star" id="rating">4.5</i>
                            <i class="fa fa-cart-plus fa-2x add-to-cart"></i>
                        </div>
                        <img src="../images/Mixed-Fruit-Shake.png" alt="">
                        <p id="item-name">綜合水果奶昔</p>
                        <p id="item-price">價格 : $ 10</p>
                    </div>

                    <div id="item-card">
                        <div id="card-top">
                            <i class="fa fa-star" id="rating">4.5</i>
                            <i class="fa fa-cart-plus fa-2x add-to-cart"></i>
                        </div>
                        <img src="../images/Mixed-Fruit-Shake.png" alt="">
                        <p id="item-name">綜合水果奶昔</p>
                        <p id="item-price">價格 : $ 10</p>
                    </div>

                    <div id="item-card">
                        <div id="card-top">
                            <i class="fa fa-star" id="rating">4.5</i>
                            <i class="fa fa-cart-plus fa-2x add-to-cart"></i>
                        </div>
                        <img src="../images/Mixed-Fruit-Shake.png" alt="">
                        <p id="item-name">綜合水果奶昔</p>
                        <p id="item-price">價格 : $ 10</p>
                    </div>

                    <div id="item-card">
                        <div id="card-top">
                            <i class="fa fa-star" id="rating">4.5</i>
                            <i class="fa fa-cart-plus fa-2x add-to-cart"></i>
                        </div>
                        <img src="../images/Mixed-Fruit-Shake.png" alt="">
                        <p id="item-name">綜合水果奶昔</p>
                        <p id="item-price">價格 : $ 10</p>
                    </div>

                    <div id="item-card">
                        <div id="card-top">
                            <i class="fa fa-star" id="rating">4.5</i>
                            <i class="fa fa-cart-plus fa-2x add-to-cart"></i>
                        </div>
                        <img src="../images/Mixed-Fruit-Shake.png" alt="">
                        <p id="item-name">綜合水果奶昔</p>
                        <p id="item-price">價格 : $ 10</p>
                    </div>
                </div>

                <div id="Soup">
                    <p id="category-name">濃湯</p>
                    <div id="item-card">
                        <div id="card-top">
                            <i class="fa fa-star" id="rating">3.8</i>
                            <i class="fa fa-cart-plus fa-2x add-to-cart"></i>
                        </div>
                        <img src="../images/Mixed-Fruit-Shake.png" alt="">
                        <p id="item-name">綜合水果奶昔</p>
                        <p id="item-price">價格 : $ 10</p>
                    </div>
                </div>

                <div id="Salad">
                    <p id="category-name">沙拉</p>
                    <div id="item-card">
                        <div id="card-top">
                            <i class="fa fa-star" id="rating">5.0</i>
                            <i class="fa fa-cart-plus fa-2x add-to-cart"></i>
                        </div>
                        <img src="../images/Mixed-Fruit-Shake.png" alt="">
                        <p id="item-name">綜合水果奶昔</p>
                        <p id="item-price">價格 : $ 10</p>
                    </div>
                </div>

                <div id="Entree">
                    <p id="category-name">前菜</p>
                    <div id="item-card">
                        <div id="card-top">
                            <i class="fa fa-star" id="rating">4.3</i>
                            <i class="fa fa-cart-plus fa-2x add-to-cart"></i>
                        </div>
                        <img src="../images/Mixed-Fruit-Shake.png" alt="">
                        <p id="item-name">綜合水果奶昔</p>
                        <p id="item-price">價格 : $ 10</p>
                    </div>
                </div>

                <div id="Main-course">
                    <p id="category-name">主餐</p>
                    <div id="item-card">
                        <div id="card-top">
                            <i class="fa fa-star" id="rating">4.9</i>
                            <i class="fa fa-cart-plus fa-2x add-to-cart"></i>
                        </div>
                        <img src="../images/Mixed-Fruit-Shake.png" alt="">
                        <p id="item-name">綜合水果奶昔</p>
                        <p id="item-price">價格 : $ 10</p>
                    </div>
                </div>

                <div id="Dessert">
                    <p id="category-name">甜點</p>
                    <div id="item-card">
                        <div id="card-top">
                            <i class="fa fa-star" id="rating">3.6</i>
                            <i class="fa fa-cart-plus fa-2x add-to-cart"></i>
                        </div>
                        <img src="../images/Mixed-Fruit-Shake.png" alt="">
                        <p id="item-name">綜合水果奶昔</p>
                        <p id="item-price">價格 : $ 10</p>
                    </div>
                </div>

            </div>
        </div>

        <div id="cart">
            <div class="taste-header">
                <div class="user">
                    <i class="fa fa-user Login"> Login</i>
                    <a href="Register.html" class="SignIn">Sign in</a>
                    <div class="user-dropdown">
                        <p> Hello User !</p>
                        <!-- <a href="#">Profile</a> -->
                        <i class="fa fa-sign-out  Logout"> Logout</i>

                    </div>
                </div>
            </div>

            <div id="category-list">
                <p class="item-menu">Food Menu</p>
                <div class="border"></div>
                <div class="list-card">
                    <img src="../images/Mixed-Fruit-Shake.png" alt="list">
                    <a href="" class="list-name"><b>開胃菜</b></a>
                </div>

                <div class="list-card">
                    <img src="../images/Mixed-Fruit-Shake.png" alt="list">
                    <a href="" class="list-name"><b>濃湯</b></a>
                </div>

                <div class="list-card">
                    <img src="../images/Mixed-Fruit-Shake.png" alt="list">
                    <a href="" class="list-name"><b>沙拉</b></a>
                </div>

                <div class="list-card">
                    <img src="../images/Mixed-Fruit-Shake.png" alt="list">
                    <a href="" class="list-name"><b>前菜</b></a>
                </div>

                <div class="list-card">
                    <img src="../images/Mixed-Fruit-Shake.png" alt="list">
                    <a href="" class="list-name"><b>主餐</b></a>
                </div>

                <div class="list-card">
                    <img src="../images/Mixed-Fruit-Shake.png" alt="list">
                    <a href="" class="list-name"><b>甜點</b></a>
                </div>
            </div>
        </div>


    </div>

</body>

</html>